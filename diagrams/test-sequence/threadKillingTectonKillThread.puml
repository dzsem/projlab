@startuml threadKillingTectonKillThreadTest

title ThreadKillingTecton Kill Thread

actor "Tester" as tst
participant "tec: ThreadKillingTecton" as tec
participant "mt: MushroomThread" as mt
participant "ct: MushroomThread" as ct
participant "l: Logger" as l

activate tst

tst -> l: printState(tec)
activate l
tst <-- l
deactivate l

tst -> tec: killThread(mt)
activate tec

tec -> mt: kill()
activate mt

loop ct in connectedThreads
    mt -> ct: removeConnectedThread(mt)
    activate ct

    mt <-- ct
    deactivate ct
end

tec <-- mt
deactivate mt

tec -> tec: removeConnection(mt)

tst <-- tec
deactivate tec

tst -> l: printState(tec)
activate l
tst <-- l
deactivate l

deactivate tst

@enduml